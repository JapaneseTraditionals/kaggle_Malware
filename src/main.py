import gc
import warnings
from logging import getLogger
from get_option import get_option
from save_log import create_logger, get_version
from processor_factory import ProcessorFactory
from exceptions import *
warnings.filterwarnings('ignore')


def main(args):
    ProcessorFactory.process(args)


if __name__ == "__main__":
    gc.enable()
    version = get_version()
    create_logger(version)
    try:
        main(get_option())
    except DuplicateVersionException:
        getLogger(version).exception("Duplicate Version Exception Occurred.")
    except IrregularArgumentException:
        getLogger(version).exception("Irregular Argument for Feature Extraction.")
    except IrregularCalcBackException:
        getLogger(version).exception("Irregular Dataframe back.")
    except Exception:
        getLogger(version).exception("Unexpected Exception Occurred.")
