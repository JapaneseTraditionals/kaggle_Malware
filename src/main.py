import gc
from logging import getLogger
from get_option import get_option
from save_log import create_logger, get_version
from processor_factory import ProcessorFactory


def main(args):
    ProcessorFactory.process(args)


if __name__ == "__main__":
    gc.enable()
    args = get_option()
    version = get_version(args)
    create_logger(version)
    try:
        main(get_option())
    except Exception:
        getLogger(version).exception("Unexpected Exception Occurred.")
