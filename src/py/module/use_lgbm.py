# Save importances as csv (Optional: png)

import os
import gc
from pathlib import Path
import numpy as np
import pandas as pd
import itertools
import matplotlib
matplotlib.use("agg")
import matplotlib.pyplot as plt
import seaborn as sns

def fit_train(df, params):
    clf = 'hoge'
    return clf

def predict_test(df, clf):
    submit = "hoge"
    return submit

def save_importances(importances_, version):
    #TODO: Implementation of CSV
    mean_gain = importances_[['gain', 'feature']].groupby('feature').mean()
    importances_['mean_gain'] = importances_['feature'].map(mean_gain['gain'])
    plt.figure(figsize=(16, 24))
    sns.barplot(x='gain', y='feature', data=importances_.sort_values('mean_gain', ascending=False))
    plt.tight_layout()
    plt.savefig(Path(__file__).absolute().parents[3] / "data" / "importances" / "{}.png".format(version))
